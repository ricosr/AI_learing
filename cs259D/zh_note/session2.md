# 僵尸网络

## 僵尸网络
- 由恶意软件组成的机器的网络
- 估计有16-25%的电脑是僵尸网络的一部分
   - Rustock僵尸网络有超过100万个僵尸机器
   - 风暴僵尸网络是“世界顶级超级计算机”之一
- 应用
   - 信息和身份盗取
   - DDoS攻击
   - 软甲盗版
   - 垃圾/钓鱼
      - 大约80%是通过邮件通道传播
      - 例如： Grum, Cutwail, Rustock 
   - 地下经济
      - 1万个机器15美元
   - 危害的规模（对比国际电信联盟？？？）
      - 2006年对全球经济的直接损失达132亿美元
      - 2005年对美国企业造成的直接和间接损失达672亿美元
      - 2007年全球垃圾邮件成本:全球1000亿美元，美国350亿美元

## 开始点
- 因特网中继聊天(IRC)
   - 基于文本的聊天系统
   - 在频道中组织交流
   - 僵尸网络控制IRC聊天室中的交互
      - 解释简单的命令
      - 提供管理支持
      - 提供简单的游戏/服务
      - 检索信息：操作系统，登录次数，邮件等
   - 第一个IRC机器人：Eggdrop, 1993 

## 僵尸网络的组件
- 僵尸电脑
   - 高传输速率
   - 安全性低
   - 距离远
   - 大部分是Windows系统
![2-1](./img/2-1.jpg)

## 僵尸网络的生命周期
- 初步传染
   - 传染网站，邮件附件，可移动媒体
- 二次传染
   - 主机下载&可运行二级制文件，变成一台肉机
   - 通过FTP, HTTP, or P2P 
- 连接或恢复
   - 与C＆C建立联系的过程
   - 发生在每次机器重启时
- 恶意的活动
   - 肉机和C&C之间的消息交换更加频繁
- 维护和升级

## 僵尸网络C＆C拓扑结构
- 星形
- 多服务器
- 分层的
- 随机的

## 星形C＆C拓扑结构
- 中心的C&C与所有肉机沟通
- 使用的协议
   - IRC
      - C&C功能的SDBot, GTBot, Agobot仍在使用
         - 源码已经被作者开源
   - HTTP
      - 混入正常的用户流量
      - Do-it-yourself kits 
   - 即时通讯(IM)协议
      - ICQ, AIM, MSN Messenger
      - 需要为每个肉机创建一个帐户
- 优点：
   - 控制速度快
- 缺点：
   - 会单点失效
![2-2](./img/2-2.jpg)

## 多服务器的C＆C拓扑结构
- 星形拓扑结构的拓展
- C&C服务器在它们之间直接相互沟通
- 优点：
   - 不会单点失效
   - 地区优化型
- 缺点：
   - 需要操作者更多的规划/工作
![2-3](./img/2-3.jpg)

## 分层的C＆C拓扑结构
- 一组肉机充当服务端
   - 静态路由的IP地址
   - 代理C&C指令送给客户端肉机
- 变种：Hierarchical Kademlia (是一种通过分散式杂凑表实现的协议算法)
   - 一组机器人集群
   - P2P用于集群内通信
   - 集群间通信:超级肉机节点
- 优点：
   - 僵尸网络识别:拦截僵尸网络不会枚举所有成员，不太可能揭示出C&C
   - 易于转售
      - 将僵尸网络的部分出租/转售给其他运营商
- 缺点：
   - 命令延迟：不适合实时活动
![2-4](./img/2-4.jpg)

